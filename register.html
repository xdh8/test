<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>天猫注册</title>
        <link href="css/reset.css" rel="stylesheet">
        <link href="css/register.css" rel="stylesheet">
        <script src="js/jquery-1.8.3.min.js"></script>
        <!-- <script src="js/register.js"></script> -->
    </head>
    <body>
        <div class="xieyi">
            <div class="xieyi1">
                <div class="xieyi11">注册协议</div>
                <a href="index.html" class="xieyi12">X</a>
            </div>
            <div class="xieyi2">
                <b>【审慎阅读】</b>您在申请注册流程中点击同意前，应当认真阅读以下协议。<b><u>请您务必审慎阅读、充分理解协议中相关条款内容，其中包括：</u></b>
                <br><br>
                1、<b><u>与您约定免除或限制责任的条款；</u></b>
                <br><br>
                2、<b><u>与您约定法律适用和管辖的条款；</u></b>
                <br><br>
                3、<b><u>其他以粗体下划线标识的重要条款。</u></b>
                <br><br>
                如您对协议有任何疑问，可向平台客服咨询。
                <br><br>
                <b>【特别提示】</b>当您按照注册页面提示填写信息、阅读并同意协议且完成全部注册程序后，即表示您已充分阅读、理解并接受协议的全部内容。如您因平台服务与淘宝发生争议的，适用《淘宝平台服务协议》处理。如您在使用平台服务过程中与其他用户发生争议的，依您与其他用户达成的协议处理。
                <br><br>
                <u><b>阅读协议的过程中，如果您不同意相关协议或其中任何条款约定，您应立即停止注册程序。<b></u>
            </div>
            <div class="xieyi3">
                <a href="">《淘宝平台服务协议》</a><br><br>
                <a href="">《法律声明及隐私权政策》</a><br><br>
                <a href="">《支付宝服务协议》</a>
            </div>
            <div class="xieyi4">
                同意协议
            </div>
        </div> 
    	<div class="box1">
    		<div class="box11 show11_b">
    			<span class="box111 show111_r">1</span>
    			<span>设置用户名</span>
    		</div>
    		<div class="box12">
    			<span class="box111">2</span>
    			<span>填写账号信息</span>
    		</div>
    		<div class="box12">
    			<span class="box111">3</span>
    			<span>设置支付方式</span>
    		</div>
    		<div class="box12">
    			<span class="box111">4</span>
    			<span>注册成功</span>
    		</div>
    	</div>
    	<div class="box2">
    		<form>
    			<div class="box21">
	    			<span class="box211">手机号</span>
	    			<select class="box212">
	    				<option value="86">中国大陆&nbsp;&nbsp;+86</option>
	    				<option value="886">中国台湾&nbsp;&nbsp;+886</option>
	    			</select>
	    			<input type="text" placeholder="请输入你的手机号码" class="box213">
                    <div></div>
    			</div>
    			<div class="box22">
    				<span class=box211>验证</span>
    				<div class="box222">
    					<div class="box2221">
	    					<div class="box22211"></div>
	    					<div class="box22212">>></div>
	    					<div class="box22213"></div>
    					</div>
    					<span>请按住滑块，拖动到最右边</span>
    				</div>
    			</div>
    			<button class="box23" type="button">下一步</button>
    		</form>
    	</div>
    	<div class="box3">
            <div class="box31">
                <div class="box311">验证手机</div>
                <div class="box312">X</div>
            </div>
            <div class="box32">
                <div>!</div> 校验码已发送到你的手机，15分钟内输入有效，请勿泄漏
            </div>
            <div class="box33">
                <span class="box331">手机号</span>
                <span class="box332"></span>
            </div>
            <div class="box34">
                <span class="box341">验证码</span>
                <input type="text" class="box342">
                <button class="box343" type='button'>免费获取验证码</button>
                <div class="box344">
                    <div>√</div>
                    校验码已发送至你的手机，请查收
                </div>
            </div>
            <div class="box35">
                <button class="box351" type="button">确认</button>
            </div>
        </div>



    	<script>
                //页面加载完，协议显示
                $(document).load(function(){
                    $('.xieyi').show();
                })
                //协议
                $(function(){
                    //用a标签当按键，用以下清除原动作，自行加事件
                    //<a href="javascript:void(0);"></a>
                    //e.stopPropagation()  同上

                    //点击同意协议
                    $('.xieyi4').click(function(){
                        $('.xieyi').hide();
                    })
                })

                //正则 手机号
                var pattern=/^1(([358]\d)|(47)|(66)|(7[013678])|(9[89]))\d{8}$/;
                /*console.log(pattern.test(v));*/

                //绿底滑块
                $('.box2221').mousedown(function(e){
                    var evt=e||window.event;
                    //获取鼠标至滑块（包括隐藏的绿色部分）左边的距离
                    var dx=evt.clientX-$(this).offset().left;
                    /*console.log('dx:'+dx);*/
                    $(document).mousemove(function(ev){
                        var evt=ev||window.event;
                        //获取小滑块（有箭头部分）离窗口左边距离
                        var l=evt.clientX-dx-562;
                        console.log('l:'+l);
                        //滑块离窗口左边距离赋值改变
                        if(l>=0){
                            l=0;
                            //小滑块移至最右边时，停在那里
                            $(this).off('mousemove');
                            //并且 验证框相关改变
                            $('.box222>span').html('验证通过').css('color','white');
                            $('.box22212').html('<div>√</div>');
                            $('.box22212>div').css({
                                'color':'white',
                                'width':'18px',
                                'height':'18px',
                                'line-height':'18px',
                                'background':'rgb(120,190,60)',
                                'border':'1px solid rgb(120,190,60)',
                                'border-radius':'50%',
                                'margin':'8px auto',
                            });
                            //按钮'下一步'变色
                            $('.box23').css('background','red').mouseover(function(){
                                $(this).css('background','rgba(255,50,50,0.8)');
                            }).mouseout(function(){
                                $(this).css('background','rgb(255,50,50)');
                            });
                            //点击'下一步' 让下一个页面显示
                            $('.box23').click(function(){
                                var v=$('.box213').val();
                                console.log(v);
                                if(pattern.test(v)){
                                    console.log(pattern.test(v));
                                    $('.box3').css('display','block');
                                }
                            });
                        }else if(l<=-260){
                            l=-260;
                        }
                        $('.box2221').css('left',l);
                    })
                    //根据滑块位置，选择停在最右边还是返回最左边
                    $(document).mouseup(function(){
                        $(this).off('mousemove');
                        if($('.box2221').offset().left>=562){
                            $('.box2221').css('left',0);
                        }else{
                            $('.box2221').css('left',-260);
                        }

                    })
                })
                
                //手机号框    
                $('.box213').blur(function(){
                    //判断手机号是否正确 正则
                    var v=$('.box213').val();
                    /*console.log(v);*/
                    //1.设置用户名 验证手机 接受前面的手机号码
                    $('.box332').html(v);
                    //没输入
                    if(v==''){
                        $(this).css({'border':'1px solid red','color':'red',});
                        $('.box21>div').html('<div>x</div> 请输入你的手机号码');
                        $('.box21>div>div').css({
                            'display':'inline-block',
                            'width':'12px',
                            'height':'12px',
                            'line-height':'11px',
                            'text-align':'center',
                            'background':'red',
                            'color':'white',
                            'border':'1px solid red',
                            'border-radius':'50%',
                            'margin-top':'8px',
                            'font-size':'11px',
                            'font-weight':'bold',
                        });
                        //号码格式正确
                    }else if(pattern.test(v)){
                        $(this).css({'border':'1px solid black','color':'black',});
                        $('.box21>div').html('<div>√</div>');
                        $('.box21>div>div').css({
                            'display':'inline-block',
                            'width':'12px',
                            'height':'12px',
                            'line-height':'12px',
                            'text-align':'center',
                            'background':'green',
                            'color':'white',
                            'border':'1px solid green',
                            'border-radius':'50%',
                            'margin-top':'8px',
                            'font-size':'10px',
                            'font-weight':'bold',
                        });
                        //号码格式错误且不为空
                    }else if(pattern.test(v)!=true && v!=''){
                            $(this).css({'border':'1px solid red','color':'red',});
                            $('.box21>div').html('<div>x</div> 手机号码格式不正确，请重新输入');
                            $('.box21>div>div').css({
                                'display':'inline-block',
                                'width':'12px',
                                'height':'12px',
                                'line-height':'11px',
                                'text-align':'center',
                                'background':'red',
                                'color':'white',
                                'border':'1px solid red',
                                'border-radius':'50%',
                                'margin-top':'8px',
                                'font-size':'11px',
                                'font-weight':'bold',
                            });
                    }
                })

                //发送验证码 倒计时     没实现
                /*$('.box343').click(function(){
                    var i=90;
                    var run=function(){
                        timer=setInterval(function(){
                            i--;
                            if(i<0){
                                $(this).html('免费获取验证码');
                            $(this).html('重新发送验证码'+i)
                                return;
                            }
                        },1000)
                    }
                    run();
                })*/
    	</script>
    </body>
</html>